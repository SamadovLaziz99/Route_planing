(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c56858a"],{1798:function(e,t,a){"use strict";a("7e41")},"5c47":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{class:e.classObject},[e.shouldShowLabel?a("span",{staticClass:"vue-switcher__label"},[e.label?a("span",{domProps:{textContent:e._s(e.label)}}):e._e(),e._v(" "),!e.label&&e.value?a("span",{domProps:{textContent:e._s(e.textEnabled)}}):e._e(),e._v(" "),e.label||e.value?e._e():a("span",{domProps:{textContent:e._s(e.textDisabled)}})]):e._e(),e._v(" "),a("input",{attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:e.value},on:{change:e.trigger}}),e._v(" "),a("div")])},o=[],i=a("ade3"),s={name:"switches",props:{typeBold:{default:!1},value:{default:!1},disabled:{default:!1},label:{default:""},textEnabled:{default:""},textDisabled:{default:""},color:{default:"default"},theme:{default:"default"},emitOnMount:{default:!0}},mounted:function(){this.emitOnMount&&this.$emit("input",this.value)},methods:{trigger:function(e){this.$emit("input",e.target.checked)}},computed:{classObject:function(){var e,t=this.color,a=this.value,r=this.theme,o=this.typeBold,s=this.disabled;return e={"vue-switcher":!0},Object(i["a"])(e,"vue-switcher--unchecked",!a),Object(i["a"])(e,"vue-switcher--disabled",s),Object(i["a"])(e,"vue-switcher--bold",o),Object(i["a"])(e,"vue-switcher--bold--unchecked",o&&!a),Object(i["a"])(e,"vue-switcher-theme--".concat(r),t),Object(i["a"])(e,"vue-switcher-color--".concat(t),t),e},shouldShowLabel:function(){return""!==this.label||""!==this.textEnabled||""!==this.textDisabled}}},n=s,l=(a("1798"),a("2877")),c=Object(l["a"])(n,r,o,!1,null,null,null);t["a"]=c.exports},"7e41":function(e,t,a){},"9f85":function(e,t,a){"use strict";a("cca9")},a17b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.error?a("error-page",{attrs:{error:e.error}}):a("div",[e.loadOne?[a("div",{staticClass:"loading"})]:a("div",[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("h1",[e._v(e._s(e.$t("food"))+" "+e._s(e.id?e.$t("update"):e.$t("create")))]),e._v(" "),a("piaf-breadcrumb")],1)],1),e._v(" "),a("b-form",{staticClass:"av-tooltip tooltip-right-bottom",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[a("b-row",[a("b-colxx",{attrs:{xxs:"12",md:"8"}},[a("b-card",{staticClass:"mb-4",attrs:{title:e.id?e.$t("form.edition"):e.$t("form.creation")}},[a("b-row",[a("div",{staticClass:"lang-tabs"}),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"12"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("name")}},[a("b-form-input",{attrs:{type:"text",state:!e.$v.form.name.$error},model:{value:e.$v.form.name.$model,callback:function(t){e.$set(e.$v.form.name,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.name.$model"}}),e._v(" "),e.$v.form.name.required?e._e():a("b-form-invalid-feedback",[e._v("\n                        "+e._s(e.$t("please.enter")+e.$t("name"))+"\n                      ")])],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("vendor")}},[a("v-select",{attrs:{options:e.vendors,state:!e.$v.form.vendor.$error},model:{value:e.$v.form.vendor.$model,callback:function(t){e.$set(e.$v.form.vendor,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.vendor.$model"}}),e._v(" "),a("b-form-invalid-feedback",{style:"display: "+(e.isValidCustom&&!e.$v.form.vendor.required?"block":"none")},[e._v("\n                        "+e._s(e.$t("please.enter")+e.$t("vendor"))+"\n                      ")])],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("category")}},[a("v-select",{attrs:{options:e.categories,state:!e.$v.form.category.$error},model:{value:e.$v.form.category.$model,callback:function(t){e.$set(e.$v.form.category,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.category.$model"}}),e._v(" "),a("b-form-invalid-feedback",{style:"display: "+(e.isValidCustom&&!e.$v.form.category.required?"block":"none")},[e._v("\n                        "+e._s(e.$t("please.enter")+e.$t("category"))+"\n                      ")])],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("unit")}},[a("v-select",{attrs:{options:e.units,state:!e.$v.form.unit.$error},model:{value:e.$v.form.unit.$model,callback:function(t){e.$set(e.$v.form.unit,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.unit.$model"}}),e._v(" "),a("b-form-invalid-feedback",{style:"display: "+(e.isValidCustom&&!e.$v.form.unit.required?"block":"none")},[e._v("\n                        "+e._s(e.$t("please.enter")+e.$t("unit"))+"\n                      ")])],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("price")}},[a("b-form-input",{attrs:{type:"number",state:!e.$v.form.price.$error},model:{value:e.$v.form.price.$model,callback:function(t){e.$set(e.$v.form.price,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.price.$model"}}),e._v(" "),e.$v.form.price.required?e._e():a("b-form-invalid-feedback",[e._v("\n                        "+e._s(e.$t("please.enter")+e.$t("price"))+"\n                      ")])],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("sale_price")}},[a("b-form-input",{attrs:{type:"number",state:!e.$v.form.sale_price.$error},model:{value:e.$v.form.sale_price.$model,callback:function(t){e.$set(e.$v.form.sale_price,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.sale_price.$model"}}),e._v(" "),e.$v.form.sale_price.required?e._e():a("b-form-invalid-feedback",[e._v("\n                        "+e._s(e.$t("please.enter")+e.$t("sale_price"))+"\n                      ")])],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("min_amount")}},[a("b-form-input",{attrs:{type:"number",state:!e.$v.form.min_amount.$error},model:{value:e.$v.form.min_amount.$model,callback:function(t){e.$set(e.$v.form.min_amount,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.min_amount.$model"}}),e._v(" "),e.$v.form.min_amount.required?e._e():a("b-form-invalid-feedback",[e._v("\n                        "+e._s(e.$t("please.enter")+e.$t("min_amount"))+"\n                      ")])],1)],1),e._v(" "),a("b-colxx",{staticClass:"has-float-label mb-2",attrs:{xxs:"12",md:"4"}},[a("b-form-group",{attrs:{label:e.$t("video_url")}},[a("b-form-input",{attrs:{type:"text"},model:{value:e.form.video_url,callback:function(t){e.$set(e.form,"video_url",t)},expression:"form.video_url"}})],1)],1),e._v(" "),a("b-colxx",{staticClass:"has-float-label mb-2",attrs:{xxs:"12",md:"4"}},[a("b-form-group",{attrs:{label:e.$t("preparation_time")}},[a("b-form-input",{attrs:{type:"number",state:!e.$v.form.preparation_time.$error},model:{value:e.$v.form.preparation_time.$model,callback:function(t){e.$set(e.$v.form.preparation_time,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.preparation_time.$model"}}),e._v(" "),e.$v.form.preparation_time.required?e._e():a("b-form-invalid-feedback",[e._v("\n                        "+e._s(e.$t("please.enter")+e.$t("preparation_time"))+"\n                      ")])],1)],1),e._v(" "),a("b-colxx",{staticClass:"mb-2",attrs:{xxs:"12",md:"4"}},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"d-flex mt-2"},[a("span",[e._v(e._s(e.$t("status")))]),e._v(" "),a("b-form-group",{staticClass:"ml-2"},[a("switches",{staticClass:"vue-switcher-small",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.form.active,callback:function(t){e.$set(e.form,"active",t)},expression:"form.active"}})],1)],1),e._v(" "),a("div",{staticClass:"d-flex mt-2"},[a("span",[e._v(e._s(e.$t("cola_combo")))]),e._v(" "),a("b-form-group",{staticClass:"ml-2"},[a("switches",{staticClass:"vue-switcher-small",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.form.cola_combo,callback:function(t){e.$set(e.form,"cola_combo",t)},expression:"form.cola_combo"}})],1)],1)])]),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"12"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("description")}},[a("b-textarea",{attrs:{rows:4,"max-rows":4},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1)],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-card",{staticClass:"mb-4",attrs:{title:e.$t("ingredients")}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("ingredients")}},[a("input-tag",{attrs:{state:!e.$v.form.ingredients.$error},model:{value:e.$v.form.ingredients.$model,callback:function(t){e.$set(e.$v.form.ingredients,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.ingredients.$model"}}),e._v(" "),a("b-form-invalid-feedback",{style:"display: "+(e.isValidCustom&&!e.$v.form.ingredients.required?"block":"none")},[e._v("\n                    "+e._s(e.$t("please.enter")+e.$t("unit"))+"\n                  ")])],1)],1),e._v(" "),e.$route.params.id?a("dropzone",{ref:"dropzone",attrs:{url:"food",media:{id:e.$route.params.id,type:"image"}}}):e._e()],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"12"}},[a("b-card",{staticClass:"mb-4 d-flex align-items-end"},[a("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.$t("cancel"))+"\n                ")]),e._v(" "),a("b-button",{staticClass:"ml-1",attrs:{variant:"outline-secondary"}},[e._v(e._s(e.$t("clear"))+"\n                ")]),e._v(" "),a("b-button",{class:{"btn-multiple-state btn-shadow":!0,"show-spinner":e.pending},attrs:{type:"submit",variant:"primary"}},[a("span",{staticClass:"spinner d-inline-block"},[a("span",{staticClass:"bounce1"}),e._v(" "),a("span",{staticClass:"bounce2"}),e._v(" "),a("span",{staticClass:"bounce3"})]),e._v(" "),a("span",{staticClass:"label"},[e._v(e._s(e.id?e.$t("update"):e.$t("save")))])])],1)],1)],1)],1)],1)],2)],1)},o=[],i=a("5530"),s=(a("b0c0"),a("a4d3"),a("e01a"),a("159b"),a("d81d"),a("5c47")),n=a("b5ae"),l=a("1dce"),c=a("2f62"),d=a("dcdb"),m="food",u=Object(d["a"])(m),b=u.getById,v=u.put,f=u.post,p={components:{switches:s["a"]},mixins:[l["validationMixin"]],name:"FoodCrud",validations:{form:{name:{required:n["required"]},preparation_time:{required:n["required"]},vendor:{required:n["required"]},price:{required:n["required"]},ingredients:{required:n["required"]},min_amount:{required:n["required"]},sale_price:{required:n["required"]},category:{required:n["required"]},unit:{required:n["required"]}}},data:function(){return{id:this.$route.params.id,isValidCustom:!1,form:{name:"",description:"",preparation_time:null,vendor:null,active:!0,cola_combo:!0,price:null,ingredients:[],video_url:"",min_amount:null,sale_price:null,category:null,unit:null}}},mounted:function(){var e=this;this.id&&this.$store.dispatch(b,this.id).then((function(t){var a=e.form;a.name=t.name,a.active=t.active,a.cola_combo=t.cola_combo,a.price=t.price,a.sale_price=t.sale_price,a.min_amount=t.min_amount,a.video_url=t.video_url,a.preparation_time=t.preparation_time,a.description=t.description,a.ingredients=t.ingredients,a.category={label:t.category.name[e.$lang],value:t.category.id},a.unit={label:t.unit.name[e.$lang],value:t.unit.id};var r=t.vendor.user,o=r.first_name,i=r.last_name;a.vendor={label:o+" "+i,value:t.vendor.id},console.log(t),setTimeout((function(){t.media&&t.media.length>0&&t.media.forEach((function(t){e.$refs.dropzone.setDefaultImage({size:t.size,name:t.path,type:t.mime_type,id:t.id},t.url)}))}),200)})),this.getCategories(),this.getUnits(),this.getVendors()},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(c["c"])(["dataCategories","dataUnits","dataVendors"])),Object(c["c"])(Object(d["b"])(m))),{},{categories:function(){var e=this;return this.dataCategories.map((function(t){return{label:t.name[e.$lang],value:t.id}}))},units:function(){var e=this;return this.dataUnits.map((function(t){return{label:t.name[e.$lang],value:t.id}}))},vendors:function(){return this.dataVendors.map((function(e){var t=e.user,a=t.first_name,r=t.last_name;return{label:a+" "+r,value:e.id}}))}}),methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["getCategories","getUnits","getVendors"])),{},{clickMap:function(e){this.coords=e.get("coords")},submit:function(){var e=this;if(console.log(this.$v),this.isValidCustom=!0,this.$v.$touch(),!this.$v.$invalid){var t,a,r,o=Object(i["a"])({},this.form);delete o.id,o.category_id=null===(t=this.form.category)||void 0===t?void 0:t.value,o.vendor_id=null===(a=this.form.vendor)||void 0===a?void 0:a.value,o.unit_id=null===(r=this.form.unit)||void 0===r?void 0:r.value,o.min_amount=parseInt(this.form.min_amount),o.preparation_time=parseInt(this.form.preparation_time),o.price=parseInt(this.form.price),o.sale_price=parseInt(this.form.sale_price),delete o.category,delete o.unit,delete o.vendor,console.log(o),this.$store.dispatch(this.id?v:f,{id:this.id,data:o}).then((function(t){e.$router.go(-1)}))}}})},$=p,_=(a("9f85"),a("2877")),h=Object(_["a"])($,r,o,!1,null,null,null);t["default"]=h.exports},cca9:function(e,t,a){},dcdb:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var r=a("ed08"),o=function(e){return{get:Object(r["b"])("get ".concat(e)),getById:Object(r["b"])("get by id ".concat(e)),post:Object(r["b"])("post ".concat(e)),put:Object(r["b"])("put ".concat(e)),remove:Object(r["b"])("delete ".concat(e))}},i=function(e){return{load:Object(r["b"])("load ".concat(e)),loadOne:Object(r["b"])("one load ".concat(e)),data:Object(r["b"])("data ".concat(e)),error:Object(r["b"])("error ".concat(e)),pending:Object(r["b"])("pending ".concat(e)),deleting:Object(r["b"])("deleting ".concat(e)),pagination:Object(r["b"])("pagination ".concat(e))}}}}]);