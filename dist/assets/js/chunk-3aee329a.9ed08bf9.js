(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3aee329a"],{"0330":function(t,e,s){},"2f42":function(t,e,s){"use strict";s("4cb4")},"4cb4":function(t,e,s){},6624:function(t,e,s){"use strict";s("0330")},"6a08":function(t,e,s){"use strict";s("ad5c")},7479:function(t,e,s){t.exports=s.p+"assets/img/chef.ce9917d3.svg"},8253:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vue-perfect-scrollbar",{staticClass:"rightbar_container yandexRightBar pr-3 pl-3",attrs:{settings:{suppressScrollX:!0,wheelPropagation:!1}}},[s("b-tabs",{attrs:{fill:"","content-class":"tab-content","nav-class":"separator-tabs"},on:{input:t.tabChange}},[s("b-tab",{attrs:{title:t.$t("order.all").toUpperCase()}},[t.loadOrders?s("div",{staticClass:"text-center text-primary my-2 mt-5"},[s("b-spinner",{staticClass:"align-middle"}),t._v(" "),s("strong",[t._v("Loading...")])],1):s("TimeLine",{attrs:{items:t.dataOrders},on:{selectedItem:t.selectedItem}})],1),t._v(" "),s("b-tab",{attrs:{title:t.$t("menu.couriers").toUpperCase()}},[s("div",{staticClass:"mt-3"},t._l(t.dataCouriers,(function(e,a){return s("b-card",{key:"faq_"+a,staticClass:"d-flex mb-2 shadow",attrs:{"no-body":""}},[s("div",{class:"pl-3 pr-3 "+(t.active===a?"collapse_top":"")},[s("div",{on:{click:function(s){return t.clicked(a,e)}}},[s("list-card",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"faq_"+a,expression:"`faq_${index}`"}],key:a,staticStyle:{cursor:"pointer"},attrs:{active:t.active===a,data:e,"detail-path":"#"}})],1)]),t._v(" "),s("b-collapse",{attrs:{id:"faq_"+a,accordion:"faq-accordion",role:"tabpanel"}},[s("div",{staticClass:"pl-4 pt-4"},[s("TimeLine",{attrs:{items:[]}})],1)])],1)})),1)])],1)],1)},i=[],r=s("5530"),n=s("b7af"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-row p-2 justify-content-between align-items-center"},[s("div",{staticClass:"d-flex flex-row"},[s("router-link",{attrs:{to:t.detailPath}},[t.data.thumb?s("img",{staticClass:"img-thumbnail border-0 rounded-circle list-thumbnail align-self-center xsmall",staticStyle:{"border-radius":"50% !important"},attrs:{src:t.data.thumb,alt:t.data.title||t.data.name}}):s("img",{staticClass:"img-thumbnail border-0 rounded-circle list-thumbnail align-self-center xsmall",staticStyle:{"border-radius":"50% !important"},attrs:{src:t.defImg,alt:t.data.title||t.data.name}})]),t._v(" "),s("div",{staticClass:"pl-3 pr-2 d-flex align-items-center"},[s("router-link",{attrs:{to:t.detailPath}},[s("p",{staticClass:"font-weight-medium mb-0 "},[t._v(t._s(t.data.title||t.data.name))]),t._v(" "),s("p",{staticClass:"text-muted mb-0 text-small"},[t._v(t._s(t.data.detail))])])],1)],1),t._v(" "),s("div",{class:"simple-icon-arrow-down right position-relative "+(t.active?"collapsToggle":"")})])},c=[],l=s("9702"),d=s.n(l),u={props:["data","active","detailPath"],data:function(){return{defImg:d.a}}},m=u,p=(s("6a08"),s("2877")),_=Object(p["a"])(m,o,c,!1,null,null,null),v=_.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"history-tl-container"},[s("ul",{staticClass:"tl"},t._l(t.items,(function(e){return s("li",{key:e.id,staticClass:"tl-item",attrs:{"ng-repeat":"item in retailer_history"}},[s("div",{class:"title "+(parseInt(t.$route.query.order_id)===e.id?"title_active":""),on:{click:function(s){return t.viewItem(e)}}},[s("div",{staticClass:"order_number"},[t._v("\n              #"+t._s(e.id)+"\n            ")]),t._v(" "),s("div",{class:"order_status badge-outline-"+t.badgeType(e.status)},[t._v("\n              "+t._s(t.$t("order."+e.status))+"\n            ")]),t._v(" "),s("div",{staticStyle:{width:"100%","margin-top":"25px"}},[s("div",{staticClass:"item-title"},[s("span",{staticClass:"iconsminds-doctor marker orange"}),t._v(t._s(e.user.first_name)+" "+t._s(e.user.last_name))]),t._v(" "),s("div",{staticClass:"item-title"},[s("span",{staticClass:"iconsminds-map-marker-2 marker red"}),t._v(t._s(e.vendor.address))]),t._v(" "),s("div",{staticClass:"item-title"},[s("span",{staticClass:"iconsminds-map-marker-2 marker green"}),t._v(t._s(e.user_address.address_name))])])])])})),0)])},f=[],g=(s("b0c0"),s("2f62")),C={name:"TimeLine",props:["route","items"],data:function(){return{}},computed:Object(r["a"])({},Object(g["c"])(["dataOrders"])),methods:{viewItem:function(t){this.$router.push({name:this.$route.name,query:{order_id:t.id}}),this.$emit("selectedItem",t)},badgeType:function(t){switch(t){case"pending":return"info";case"accepted":return"secondary";case"in_process":return"primary";case"shipping":return"dark";case"finished":return"success";case"cancelled":return"danger";default:return"primary"}}}},b=C,y=(s("6624"),Object(p["a"])(b,h,f,!1,null,null,null)),k=y.exports,O={props:["route"],components:{ListCard:v,TimeLine:k},data:function(){return{active:-1,tickets:n["a"]}},computed:Object(r["a"])({},Object(g["c"])(["dataCouriers","dataOrders","loadOrders"])),methods:{selectedItem:function(t){this.$emit("selectedItem",t)},tabChange:function(t){console.log(t),0===t&&this.dataOrders&&!this.dataOrders.length&&this.$store.dispatch("getOrders",{status:"map"})},clicked:function(t,e){this.$store.dispatch("getOrders",{courier_id:e.id}).then((function(t){console.log(t)})),console.log(t),console.log(e),this.active=t}}},x=O,w=(s("e40c"),Object(p["a"])(x,a,i,!1,null,null,null));e["a"]=w.exports},"8b70":function(t,e,s){t.exports=s.p+"assets/img/empty.e7ef3d2c.svg"},"8e4b":function(t,e,s){},9702:function(t,e,s){t.exports=s.p+"assets/img/l-2.a1ab3775.jpg"},ad5c:function(t,e,s){},b7af:function(t,e,s){"use strict";var a=[{title:"Mayra Sibley",detail:"09.08.2018 - 12:45",thumb:"/assets/img/profiles/l-1.jpg"},{title:"Mimi Carreira",detail:"05.08.2018 - 10:20",thumb:"/assets/img/profiles/l-2.jpg"},{title:"Philip Nelms",detail:"05.08.2018 - 09:12",thumb:"/assets/img/profiles/l-3.jpg"},{title:"Terese Threadgill",detail:"01.08.2018 - 18:20",thumb:"/assets/img/profiles/l-4.jpg"},{title:"Kathryn Mengel",detail:"27.07.2018 - 11:45",thumb:"/assets/img/profiles/l-5.jpg"},{title:"Esperanza Lodge",detail:"24.07.2018 - 15:00",thumb:"/assets/img/profiles/l-2.jpg"},{title:"Laree Munsch",detail:"24.05.2018 - 11:00",thumb:"/assets/img/profiles/l-1.jpg"}];e["a"]=a},c58b:function(t,e,s){t.exports=s.p+"assets/img/client.9c8a3254.svg"},e40c:function(t,e,s){"use strict";s("8e4b")},ec64:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{position:"relative"}},[s("yandex-map",{staticClass:"yandexMap",attrs:{coords:t.center,zoom:15,"map-type":"map",controls:["zoomControl","fullscreenControl","trafficControl"]}},[t._l(t.courierLocations,(function(e){return s("ymap-marker",{key:"courier"+e.location[0].id,attrs:{"marker-id":"courier"+e.location[0].id,coords:[parseFloat(e.location[0].latitude),parseFloat(e.location[0].longitude)],"hint-content":e.name,icon:t.iconGenerator(t.icons.empty)}})})),t._v(" "),t._l(t.routedCouriers,(function(e){return t.routeMode?s("ymap-marker",{key:"courier_routed"+e.location[0].id,attrs:{"marker-id":"courier_routed"+e.location[0].id,coords:[parseFloat(e.location[0].latitude),parseFloat(e.location[0].longitude)],"hint-content":e.name,icon:t.iconGenerator(t.icons.empty,e.route)}}):t._e()})),t._v(" "),t.client?s("ymap-marker",{attrs:{"marker-id":"client"+t.client.id,coords:[parseFloat(t.client.latitude),parseFloat(t.client.longitude)],"hint-content":t.client.name,icon:t.iconGenerator(t.icons.client)}}):t._e(),t._v(" "),t._l(t.dataVendors,(function(e){return s("ymap-marker",{key:"chef"+e.id,attrs:{"marker-id":"chef"+e.id,coords:[parseFloat(e.latitude),parseFloat(e.longitude)],"hint-content":e.user.first_name+" "+e.user.last_name,icon:t.iconGenerator(t.icons.chef)}})}))],2),t._v(" "),s("div",{class:"mapRightBar "+(t.rightBar?"mapRightBar_active":"")},[s("div",{staticClass:"rightToggle",on:{click:function(e){t.rightBar=!t.rightBar}}},[s("div",{staticClass:"simple-icon-layers icon"})]),t._v(" "),s("right-bar",{on:{selectedItem:t.selectedItem}})],1),t._v(" "),s("OrderMapDetailCard",{attrs:{order:t.order},on:{close:t.closeRouteDetails}})],1)},i=[],r=s("5530"),n=(s("b0c0"),s("159b"),s("99af"),s("8253")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.order?s("div",{staticClass:"routeDetailsContent"},[s("b-card",{staticClass:"mb-4",staticStyle:{width:"100%",height:"100%"},attrs:{title:t.$t("route.details")}},[s("b-close-button",{on:{click:t.closeRouteDetails}}),t._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"detail_row"},[s("span",{staticClass:"iconsminds-shopping-cart icon"},[s("span",{staticClass:"item_name"},[t._v("Order")])]),t._v(" "),s("span",{staticClass:"item_title"},[t._v("# "+t._s(t.order.id))])]),t._v(" "),s("div",{staticClass:"detail_row"},[s("span",{staticClass:"iconsminds-male icon"},[s("span",{staticClass:"item_name"},[t._v("Customer")])]),t._v(" "),s("span",{staticClass:"item_title"},[t._v(t._s(t.order.user.first_name+" "+t.order.user.last_name))])]),t._v(" "),s("div",{staticClass:"detail_row"},[s("span",{staticClass:"iconsminds-smartphone-4 icon"},[s("span",{staticClass:"item_name"},[t._v("Customer Phone")])]),t._v(" "),s("span",{staticClass:"item_title"},[t._v(t._s(t.order.user.phone))])]),t._v(" "),s("div",{staticClass:"detail_row"},[s("span",{staticClass:"iconsminds-chef-hat icon"},[s("span",{staticClass:"item_name"},[t._v("Vendor")])]),t._v(" "),s("span",{staticClass:"item_title"},[t._v(t._s(t.order.vendor.user.first_name+" "+t.order.vendor.user.last_name))])]),t._v(" "),s("div",{staticClass:"detail_row"},[s("span",{staticClass:"iconsminds-scooter icon"},[s("span",{staticClass:"item_name"},[t._v("Courier")])]),t._v(" "),s("span",{staticClass:"item_title"},[t._v("John Doe")])]),t._v(" "),s("div",{staticClass:"detail_row"},[s("span",{staticClass:"iconsminds-road-2 icon"},[s("span",{staticClass:"item_name"},[t._v("Distance")])]),t._v(" "),s("span",{staticClass:"item_title"},[t._v(t._s(t.order.route.distance.text))])]),t._v(" "),s("div",{staticClass:"detail_row"},[s("span",{staticClass:"iconsminds-clock icon"},[s("span",{staticClass:"item_name"},[t._v("Duration")])]),t._v(" "),s("span",{staticClass:"item_title"},[t._v(t._s(t.order.route.duration.text))])]),t._v(" "),s("div",{staticClass:"detail_row"},[s("span",{staticClass:"iconsminds-traffic-light icon"},[s("span",{staticClass:"item_name"},[t._v("Duration Traffic Jump")])]),t._v(" "),s("span",{staticClass:"item_title"},[t._v(t._s(t.order.route.durationTraffic.text))])])])],1)],1):t._e()},c=[],l={name:"OrderMapDetailCard",props:["order"],methods:{closeRouteDetails:function(){this.$emit("close")}}},d=l,u=s("2877"),m=Object(u["a"])(d,o,c,!1,null,"4029dc1e",null),p=m.exports,_=s("2f62"),v=s("c58b"),h=s.n(v),f=s("7479"),g=s.n(f),C=s("8b70"),b=s.n(C),y={components:{"right-bar":n["a"],OrderMapDetailCard:p},data:function(){return{icons:{client:h.a,chef:g.a,empty:b.a},routeMode:!1,rightBar:!1,center:[41.312947,69.280204],route:{stop:!0,coords:[]},order:null,client:null,routedCouriers:[]}},mounted:function(){this.$store.dispatch("courierLocation"),this.$store.dispatch("getCouriers"),this.$store.dispatch("getVendors",{no_page:!0}),this.$store.dispatch("getOrders",{status:"map"})},computed:Object(r["a"])({},Object(_["c"])(["courierLocations","dataVendors","oneRoute","copyCourierLocations"])),methods:{closeRouteDetails:function(){this.order=null,this.client=null,this.routeMode=!1,this.routedCouriers=[],this.$router.push({name:this.$route.name}),console.log(this.routedCouriers)},routeSetterOnCourier:function(t){var e=this;this.routedCouriers=[],this.courierLocations.forEach((function(s){var a=t.user_address.longitude+","+t.user_address.latitude;e.$store.dispatch("getOneRoute","".concat(a,"~").concat(s.location[0].longitude+","+s.location[0].latitude)).then((function(t){e.routedCouriers.push(Object(r["a"])(Object(r["a"])({},s),{},{route:t}))}))})),setTimeout((function(){e.routeMode=!0}),500)},selectedItem:function(t){var e=this;this.client=null;var s="".concat(t.user_address.longitude+","+t.user_address.latitude,"~").concat(t.vendor.longitude+","+t.vendor.latitude);this.$store.dispatch("getOneRoute",s).then((function(s){e.order=Object(r["a"])(Object(r["a"])({},t),{},{route:s}),e.client={id:t.id,longitude:t.user_address.longitude,latitude:t.user_address.latitude,name:t.user.first_name+" "+t.user.last_name}})),this.routeSetterOnCourier(t)},iconGenerator:function(t,e){return{layout:"default#imageWithContent",imageHref:t,imageSize:[43,43],imageOffset:[0,0],contentOffset:[-60,44],contentLayout:e?'<div class="marker_content">\n            <div><span class="iconsminds-clock marker orange"></span>'.concat(e.duration.text,'</div>\n            <div class="ml-1"><span class="iconsminds-scooter marker blue" style="font-size: 18px"></span>').concat(e.distance.text,"</div>\n        </div>"):""}}},destroyed:function(){this.$router.push({name:this.$route.name})}},k=y,O=(s("2f42"),Object(u["a"])(k,a,i,!1,null,null,null));e["default"]=O.exports}}]);