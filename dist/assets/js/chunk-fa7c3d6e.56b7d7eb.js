(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa7c3d6e"],{"04cc":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.total/t.perPage>1?a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("b-pagination-nav",{attrs:{"number-of-pages":t.total/t.perPage,"link-gen":t.linkGen,value:t.page,"per-page":t.perPage,align:"right"},on:{change:t.changePagination},scopedSlots:t._u([{key:"next-text",fn:function(){return[a("i",{staticClass:"simple-icon-arrow-right"})]},proxy:!0},{key:"prev-text",fn:function(){return[a("i",{staticClass:"simple-icon-arrow-left"})]},proxy:!0},{key:"first-text",fn:function(){return[a("i",{staticClass:"simple-icon-control-start"})]},proxy:!0},{key:"last-text",fn:function(){return[a("i",{staticClass:"simple-icon-control-end"})]},proxy:!0}],null,!1,2104427419)})],1)],1):t._e()},i=[],s=(a("a9e3"),{name:"Pagination",props:{page:{type:Number,default:function(){return 1}},perPage:{type:Number,default:function(){return 10}},total:{type:Number,default:function(){return 0}}},data:function(){return{}},methods:{changePagination:function(t){this.$emit("changePagination",t)},linkGen:function(t){return"#page-"+t}}}),n=s,r=a("2877"),l=Object(r["a"])(n,o,i,!1,null,"228e9564",null);e["a"]=l.exports},6608:function(t,e,a){},bedc:function(t,e,a){"use strict";a("6608")},c31b:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-row mb-0",staticStyle:{width:"100% !important"}},[a("div",{staticClass:"d-block position-relative"},[a("b-badge",{staticClass:"position-absolute badge-top-right",attrs:{variant:t.order.statusColor,pill:""}},[t._v(t._s(t.order.status))])],1),t._v(" "),a("div",{staticClass:"pl-3 pt-2 pr-2 pb-2"},[a("div",[a("p",{staticClass:"list-item-heading m-0",staticStyle:{"margin-top":"-5px !important"}},[t._v(t._s(t.order.title||t.order.name))]),t._v(" "),a("p",{staticClass:"text-muted mb-1 text-small"},[t._v("Vendor: "+t._s(t.order.vendor.user.first_name+" "+t.order.vendor.user.last_name))]),t._v(" "),a("p",{staticClass:"text-muted mb-1 text-small"},[t._v("Category: "+t._s(t.order.category.name[t.$lang]))])])])])},i=[],s=a("ed08"),n={props:["order","detailPath"],methods:{imageProxy:s["g"]}},r=n,l=a("2877"),c=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=c.exports},fbad:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.error?a("error-page",{attrs:{error:t.error}}):a("b-row",[a("b-colxx",{staticClass:"disable-text-selection"},[a("crud-modal",{ref:"crudModal",attrs:{name:t.form.id?"collection.update":"collection.create"},on:{closeable:t.closed}},[a("div",{attrs:{slot:"content"},slot:"content"},[t.loadOne?a("div",{staticClass:"text-center text-primary my-2"},[a("b-spinner",{staticClass:"align-middle"}),t._v(" "),a("strong",[t._v("Loading...")])],1):a("b-tabs",{attrs:{fill:"","content-class":"tab-content","nav-class":"separator-tabs"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("b-tab",{attrs:{title:t.$t("collection.main")}},[a("div",{staticClass:"mt-4"}),t._v(" "),a("b-form",{staticClass:"av-tooltip tooltip-right-bottom"},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("name")+t.$t("uz")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.form.name.uz.$error},model:{value:t.$v.form.name.uz.$model,callback:function(e){t.$set(t.$v.form.name.uz,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.name.uz.$model"}}),t._v(" "),t.$v.form.name.uz.required?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("please.enter")+t.$t("name")+t.$t("uz")))])],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("name")+t.$t("ru")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.form.name.ru.$error},model:{value:t.$v.form.name.ru.$model,callback:function(e){t.$set(t.$v.form.name.ru,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.name.ru.$model"}}),t._v(" "),t.$v.form.name.ru.required?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("please.enter")+t.$t("name")+t.$t("ru")))])],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("name")+t.$t("oz")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.form.name.oz.$error},model:{value:t.$v.form.name.oz.$model,callback:function(e){t.$set(t.$v.form.name.oz,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.name.oz.$model"}}),t._v(" "),t.$v.form.name.oz.required?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("please.enter")+t.$t("name")+t.$t("oz")))])],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("pages.category")}},[a("v-select",{attrs:{options:t.categories,state:!t.$v.form.category.$error},model:{value:t.$v.form.category.$model,callback:function(e){t.$set(t.$v.form.category,"$model","string"===typeof e?e.trim():e)},expression:"$v.form.category.$model"}}),t._v(" "),a("b-form-invalid-feedback",{style:"display: "+(t.isValidCustom&&!t.$v.form.category.required?"block":"none")},[t._v(t._s(t.$t("please.enter")+t.$t("category")))])],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("position")}},[a("b-form-input",{attrs:{type:"number"},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1),t._v(" "),a("b-form-group",{attrs:{label:t.$t("pages.status")}},[a("b-form-radio-group",{staticClass:"pt-2",attrs:{stacked:"",options:t.statuses},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}})],1)],1)],1),t._v(" "),a("b-tab",{attrs:{title:t.$t("collection.foods")}},[a("div",{staticClass:"mt-4"}),t._v(" "),a("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:t.$t("search")},on:{change:t.searchFood}}),t._v(" "),a("vue-perfect-scrollbar",{staticClass:"scroll dashboard-list-with-thumbs",staticStyle:{height:"470px !important"},attrs:{settings:{suppressScrollX:!0,wheelPropagation:!1}}},[a("b-form-group",[a("b-form-checkbox-group",{attrs:{id:"checkbox-group-2",name:"flavour-2"},model:{value:t.form.foods,callback:function(e){t.$set(t.form,"foods",e)},expression:"form.foods"}},t._l(t.dataFood,(function(e,o){return a("b-form-checkbox",{key:e.id,class:{foods:!t.form.foods.length&&t.form.foods.includes(e.id),activeFoods:t.form.foods.length&&t.form.foods.includes(e.id)},attrs:{value:e.id}},[a("foods-card",{attrs:{order:e,"detail-path":"#"}})],1)})),1)],1)],1)],1),t._v(" "),t.form.id?a("b-tab",{attrs:{title:t.$t("collection.banner")}},[a("div",{staticStyle:{margin:"20px 0"}},[a("h4",[t._v("Banner")])]),t._v(" "),t.form.id?a("dropzone",{ref:"dropzoneBanner",attrs:{url:"collections",media:{id:t.form.id,type:"banner"},destroy:!0}}):t._e(),t._v(" "),a("div",{staticStyle:{margin:"20px 0"}},[a("h4",[t._v("Feature")])]),t._v(" "),t.form.id?a("dropzone",{ref:"dropzone",attrs:{url:"collections",media:{id:t.form.id,type:"image"},destroy:!0}}):t._e()],1):t._e()],1)],1),t._v(" "),a("div",{attrs:{slot:"action"},slot:"action"},[a("b-button",{class:{"btn-multiple-state btn-shadow":!0,"show-spinner":t.pending},attrs:{type:"submit",variant:"primary"},on:{click:t.submit}},[a("span",{staticClass:"spinner d-inline-block"},[a("span",{staticClass:"bounce1"}),t._v(" "),a("span",{staticClass:"bounce2"}),t._v(" "),a("span",{staticClass:"bounce3"})]),t._v(" "),a("span",{staticClass:"label"},[t._v(t._s(t.form.id?t.$t("update"):t.$t("save")))])])],1)]),t._v(" "),t.$store.getters.deleteModal.isShow?a("remove-modal",{on:{removing:t.removeItem}}):t._e(),t._v(" "),a("list-page-heading",{attrs:{title:t.$t("menu.foods_collection"),displayMode:t.displayMode,sortOptions:t.sortOptions,sort:t.sort,searchChange:t.searchChange,from:t.from,to:t.to,total:t.pagination.total,perPage:15}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.crudModal",modifiers:{crudModal:!0}}],class:{"top-right-button":!0},attrs:{slot:"action",variant:"primary",size:"lg"},slot:"action"},[t._v(t._s(t.$t("pages.add-new"))+"\n        ")])],1),t._v(" "),a("b-card",{attrs:{title:t.$t("menu.foods_collection")}},[a("b-table",{attrs:{hover:"",items:t.items,fields:t.fields,busy:t.load,responsive:""},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),t._v(" "),a("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(action)",fn:function(e){return[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"glyph-icon simple-icon-pencil mr-2",staticStyle:{"font-size":"16px","font-weight":"700",color:"#6B7280",cursor:"pointer"},on:{click:function(a){return t.editItem(e.item.id)}}}),t._v(" "),a("div",{staticClass:"glyph-icon simple-icon-trash mr-2",staticStyle:{"font-size":"16px","font-weight":"700",color:"#6B7280",cursor:"pointer"},on:{click:function(a){return t.$store.commit("DELETE_MODAL",{isShow:!0,data:e.item})}}})])]}},{key:"cell(name)",fn:function(e){return[a("div",[t._v(t._s(e.item.name[t.$lang]))])]}},{key:"cell(category)",fn:function(e){return[a("div",[t._v(t._s(e.item.category?e.item.category.name[t.$lang]:""))])]}},{key:"cell(status)",fn:function(e){return[a("b-badge",{attrs:{pill:"",variant:"primary"}},[t._v("Pending")])]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n            "+t._s(t.moment(e.item.created_at).format("YYYY-MM-DD HH:mm"))+"\n          ")]}},{key:"cell(selection)",fn:function(t){var e=t.rowSelected;return[e?[a("div",{staticClass:"glyph-icon simple-icon-check"})]:void 0]}}],null,!1,2363228717)}),t._v(" "),a("Pagination",{attrs:{page:t.pagination.page,"per-page":t.pagination.limit,total:t.pagination.total},on:{changePagination:t.changePagination}})],1)],1)],1)],1)},i=[],s=a("5530"),n=(a("d81d"),a("b0c0"),a("ac1f"),a("841c"),a("7717")),r=a("8302"),l=a("c31b"),c=a("04cc"),d=a("c1df"),m=a.n(d),u=a("b012"),f=a.n(u),p=a("2f62"),v=a("1dce"),g=a("b5ae"),b=a("dcdb"),h="collections",$=Object(b["a"])(h),_=$.get,y=$.getById,x=$.put,C=$.post,k=$.remove,z={components:{"list-page-heading":n["a"],"list-page-listing":r["a"],"foods-card":l["a"],Pagination:c["a"]},validations:{form:{name:{uz:{required:g["required"]},ru:{required:g["required"]},oz:{required:g["required"]}},category:{required:g["required"]}}},mixins:[v["validationMixin"]],data:function(){return this.searchFood=f()(this.searchFood,800),{activeTab:0,fields:[{key:"name",label:"Name"},{key:"category",label:"Category"},{key:"created_at",label:"Registration date",tdClass:"text-muted"},{key:"action",label:"Action"}],isValidCustom:!1,form:{id:null,name:{uz:"",ru:"",oz:""},foods:[],position:null,active:!0,category:null},statuses:[{text:"ACTIVE",value:!0},{text:"INACTIVE",value:!1}],categories:[],displayMode:"list",sort:{},sortOptions:[{column:"name",label:"Name"},{column:"position",label:"Position"}],page:1,search:"",from:0,to:0,selectedItems:[]}},watch:{foods:function(t){console.log(t)},"form.active":function(t){console.log(t)}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(p["c"])(Object(b["b"])(h))),Object(p["c"])(["dataFood"])),{},{items:function(){return this.data.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{action:["edit","delete"]})}))}}),mounted:function(){var t=this;this.getData(),this.$store.dispatch("getFood"),this.$store.dispatch("getCategories").then((function(e){t.categories=e.map((function(e){return{label:e.name[t.$lang],value:e.id}}))}))},methods:{moment:m.a,submit:function(){var t=this;if(this.$v.$touch(),this.isValidCustom=!0,console.log(this.$v),this.$v.$invalid&&(this.activeTab=0),this.form.foods.length<1&&(this.activeTab=1),!this.$v.$invalid&&this.form.foods.length>0){var e,a=Object(s["a"])({},this.form);delete a.id,a.category_id=null===(e=this.form.category)||void 0===e?void 0:e.value,a.position=parseInt(this.form.position),a.food_ids=this.form.foods,delete a.foods,this.$store.dispatch(this.form.id?x:C,{id:this.form.id,data:a}).then((function(e){t.$refs.crudModal.hideModal(),t.getData()}))}},viewItem:function(t){console.log(t)},editItem:function(t){var e=this;this.$bvModal.show("crudModal"),this.$store.dispatch(y,t).then((function(t){var a=t.media[0];setTimeout((function(){e.$refs.dropzoneBanner.setDefaultImage({size:a.size,name:a.path,type:a.mime_type,id:a.id},a.url)}),0),e.form={id:t.id,name:t.name,foods:t.foods.map((function(t){return t.id})),position:t.position,active:t.active,category:{label:t.category.name[e.$lang],value:t.category.id}}}))},removeItem:function(t){var e=this;this.$store.dispatch(k,t).then((function(t){e.$store.commit("DELETE_MODAL",{isShow:!1,data:{}}),e.getData()}))},searchFood:function(t){console.log(t)},clear:function(){this.$v.$reset(),this.form={id:null,name:{uz:"",ru:"",oz:""},foods:[],position:null,active:!0,category:null}},closed:function(t){this.clear(),console.log(t)},changePagination:function(t){this.page=t,this.getData()},searchChange:function(t){this.search=t,this.page=1},changePage:function(t){this.page=t,this.getData()},getData:function(){var t=this;this.$store.dispatch(_,{page:this.page}).then((function(e){t.to=15*t.pagination.page>t.pagination.total?t.pagination.total:15*t.pagination.page,t.from=15*(t.pagination.page-1)}))}}},w=z,P=(a("bedc"),a("2877")),O=Object(P["a"])(w,o,i,!1,null,null,null);e["default"]=O.exports}}]);